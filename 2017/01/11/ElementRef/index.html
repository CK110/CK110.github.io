<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>ElementRef | Sanshine</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="ElementRef 与 ViewContainerRef">
<meta name="keywords" content="angular2">
<meta property="og:type" content="article">
<meta property="og:title" content="ElementRef">
<meta property="og:url" content="http://CK110.github.io/2017/01/11/ElementRef/index.html">
<meta property="og:site_name" content="Sanshine">
<meta property="og:description" content="ElementRef 与 ViewContainerRef">
<meta property="og:image" content="http://ww1.sinaimg.cn/large/72f96cbagw1f82532korqj21kw0pq7a7.jpg">
<meta property="og:updated_time" content="2017-01-11T07:47:55.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="ElementRef">
<meta name="twitter:description" content="ElementRef 与 ViewContainerRef">
<meta name="twitter:image" content="http://ww1.sinaimg.cn/large/72f96cbagw1f82532korqj21kw0pq7a7.jpg">
  
    <link rel="alternate" href="/atom.xml" title="Sanshine" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Sanshine</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://CK110.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-ElementRef" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/01/11/ElementRef/" class="article-date">
  <time datetime="2017-01-11T07:42:40.000Z" itemprop="datePublished">2017-01-11</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      ElementRef
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>ElementRef 与 ViewContainerRef</p>
</blockquote>
<a id="more"></a>
<h2 id="一-测试代码"><a href="#一-测试代码" class="headerlink" title="一. 测试代码"></a>一. 测试代码</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line">import &#123;AfterContentInit, Component, ElementRef,ViewContainerRef&#125; from &apos;@angular/core&apos;;</div><div class="line"></div><div class="line">@Component(&#123;</div><div class="line">  selector: &apos;elmentRef-copy&apos;,</div><div class="line">  template: `</div><div class="line">        &lt;h1&gt;My ElmentRef&lt;/h1&gt;</div><div class="line">        &lt;pre style=&quot;background: #eee; padding: 1rem; border-radius: 3px; overflow: auto;&quot;&gt; </div><div class="line">            &lt;code&gt;&#123;&#123; node &#125;&#125;&lt;/code&gt;</div><div class="line">        &lt;/pre&gt;</div><div class="line">    `</div><div class="line">&#125;)</div><div class="line">export class ElmentRef implements AfterContentInit &#123;</div><div class="line">  node: string;</div><div class="line"></div><div class="line">  constructor(private elementRef: ElementRef, private viewContainerRef:ViewContainerRef) &#123;</div><div class="line">  &#125;</div><div class="line">  </div><div class="line">  ngAfterContentInit() &#123;</div><div class="line">    const tmp = document.createElement(&apos;div&apos;);</div><div class="line">    const el1 = this.elementRef.nativeElement.cloneNode(true);</div><div class="line">    const el2 = this.viewContainerRef.element.nativeElement.cloneNode(true);</div><div class="line"></div><div class="line">    console.log(this.elementRef);</div><div class="line">    console.log(this.viewContainerRef);</div><div class="line">    </div><div class="line">    tmp.appendChild(el1);</div><div class="line">    tmp.appendChild(el2);</div><div class="line"></div><div class="line">    this.node = tmp.innerHTML;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="1-控制台打印信息"><a href="#1-控制台打印信息" class="headerlink" title="1. 控制台打印信息"></a>1. 控制台打印信息</h3><p><img src="http://ww1.sinaimg.cn/large/72f96cbagw1f82532korqj21kw0pq7a7.jpg" alt=""></p>
<h3 id="2-ViewContainerRef"><a href="#2-ViewContainerRef" class="headerlink" title="2.ViewContainerRef"></a>2.ViewContainerRef</h3><p>类定义:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line">class ViewContainerRef &#123;</div><div class="line"></div><div class="line">  element : ElementRef</div><div class="line"></div><div class="line">  injector : Injector</div><div class="line"></div><div class="line">  parentInjector : Injector</div><div class="line"></div><div class="line">  clear() : void</div><div class="line"></div><div class="line">  get(index: number) : ViewRef</div><div class="line"></div><div class="line">  length : number</div><div class="line"></div><div class="line">  createEmbeddedView(templateRef: TemplateRef&lt;C&gt;, context?: C, index?: number) : EmbeddedViewRef&lt;C&gt;</div><div class="line"></div><div class="line">  createComponent(componentFactory: ComponentFactory&lt;C&gt;, index?: number, injector?: Injector, projectableNodes?: any[][]) : ComponentRef&lt;C&gt;</div><div class="line"></div><div class="line">  insert(viewRef: ViewRef, index?: number) : ViewRef</div><div class="line"></div><div class="line">  move(viewRef: ViewRef, currentIndex: number) : ViewRef</div><div class="line"></div><div class="line">  indexOf(viewRef: ViewRef) : number</div><div class="line"></div><div class="line">  remove(index?: number) : void</div><div class="line"></div><div class="line">  detach(index?: number) : ViewRef</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>解释:<br>Represents a container where one or more Views can be attached.<br>(代表一个容器,可以附加一个或多个视图)<br><br>The container can contain two kinds of Views. Host Views, created by instantiating a Component via createComponent, and Embedded(嵌入式) Views, created by instantiating an Embedded Template via createEmbeddedView.<br><br>The location of the View Container within the containing View is specified by the Anchor element. Each View Container can have only one Anchor Element and each Anchor Element can only have a single View Container.<br>(视图容器内包含视图的位置是由锚指定的元素,每个视图容器只能有一个锚元素和每个锚元素只能有单一视图容器)<br><br>Root elements of Views attached to this container become siblings of the Anchor Element in the Rendered View.<br>(渲染后，被加到视图容器的视图根元素和锚点元素是兄弟元素)<br><br>To access a ViewContainerRef of an Element, you can either place a Directive injected with ViewContainerRef on the Element, or you obtain it via a ViewChild query.<br>(注入 ViewContainerRef服务或者使用ViewChild查询获取ViewContainerRef)<br></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://CK110.github.io/2017/01/11/ElementRef/" data-id="cj34i8xpu0003dnsenw6smic3" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/angular2/">angular2</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2017/01/12/ZONES-IN-ANGULAR/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          ZONES IN ANGULAR
        
      </div>
    </a>
  
  
    <a href="/2017/01/11/UNDERSTANDING-ZONES/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">UNDERSTANDING ZONES</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">分类</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/前端/">前端</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Angular2-Zone-js/">Angular2 Zone.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java-设计模式/">Java 设计模式</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/angular2/">angular2</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/angular2-zone-js/">angular2 zone.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/css/">css</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/Angular2-Zone-js/" style="font-size: 10px;">Angular2 Zone.js</a> <a href="/tags/Java-设计模式/" style="font-size: 10px;">Java 设计模式</a> <a href="/tags/angular2/" style="font-size: 20px;">angular2</a> <a href="/tags/angular2-zone-js/" style="font-size: 10px;">angular2 zone.js</a> <a href="/tags/css/" style="font-size: 10px;">css</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">五月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">四月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">三月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">二月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/01/">一月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/09/">九月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/08/">八月 2016</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2017/05/19/深入浅出nodejs/">(no title)</a>
          </li>
        
          <li>
            <a href="/2017/05/17/springmvc跨域/">(no title)</a>
          </li>
        
          <li>
            <a href="/2017/05/07/NgValidateTooltip/">(no title)</a>
          </li>
        
          <li>
            <a href="/2017/04/18/前端开发平台之使用说明/">(no title)</a>
          </li>
        
          <li>
            <a href="/2017/04/14/Angular DI 总结/">(no title)</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2017 sanshine<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>